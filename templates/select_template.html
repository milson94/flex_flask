<!-- templates/select_template.html -->
{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-lg">
    <h1 class="text-3xl font-bold text-center text-sky-700 mb-6">{{ title }}</h1>
    <p class="text-center text-slate-600 mb-10">Your information has been saved. Now, choose a template for your resume:</p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
        {% for id, tpl in templates.items() %}
        <div class="template-card bg-slate-50 border border-slate-300 rounded-lg shadow-md overflow-hidden
                    hover:shadow-xl transition-shadow duration-300 ease-in-out flex flex-col">
            {% if tpl.preview_image and url_for('static', filename=tpl.preview_image) %}
            <img src="{{ url_for('static', filename=tpl.preview_image) }}" alt="{{ tpl.name }} Preview"
                 class="w-full h-48 object-cover border-b border-slate-200">
            {% else %}
            <div class="w-full h-48 bg-slate-200 flex items-center justify-center border-b border-slate-200">
                <p class="text-slate-500 italic">No preview</p>
            </div>
            {% endif %}
            <div class="p-4 flex flex-col flex-grow">
                <h3 class="text-lg font-semibold text-sky-700 mb-2">{{ tpl.name }}</h3>
                <div class="mt-auto"> {/* Pushes button to the bottom */}
                    <a href="{{ url_for('download_resume', template_id=id) }}"
                       class="block w-full text-center px-4 py-2 bg-sky-600 text-white font-medium rounded-md
                              hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2
                              transition ease-in-out duration-150">
                        Download
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="mt-12 text-center">
        <a href="{{ url_for('resume_form') }}"
           class="text-sky-600 hover:text-sky-800 hover:underline font-medium transition-colors">
            ‚Üê Go back and edit information
        </a>
    </div>
</div>
{% endblock %}